{"ast":null,"code":"import Button from\"@material-ui/core/Button\";import Container from\"@material-ui/core/Container\";import React from\"react\";import{Grid}from\"@material-ui/core\";import{makeStyles}from\"@material-ui/core/styles\";import moment from\"moment\";import AuthService from\"../services/auth-service\";import LazyLoad from\"react-lazyload\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({eventsContainer:{// scrollBehavior: \"smooth\",\noverflow:\"auto\",maxHeight:\"20em\",marginBottom:\"3rem\"},flyerBox:{display:\"flex\",flexWrap:\"wrap\",width:\"100%\",height:\"13em\",margin:\"0 0 2rem 0\",alignContent:\"flex-start\",borderBottom:\"1px darkgrey solid\"},flyerDetails:{width:\"100%\",margin:0,padding:0},flyerTitle:{fontWeight:\"bold\",fontSize:\"2em\"},flyerSubtitles:{fontStyle:\"italic\",fontSize:\"1.2em\"},imageBox:{alignSelf:\"flex-start\",width:\"10%\"},eventDetailsBox:{width:\"70%\",paddingLeft:\"1rem\"},deleteBtn:{width:\"20%\",fontSize:\"1.5rem\"},flyerImage:{alignSelf:\"flex-end\",width:\"100%\"},eventOverdue:{color:\"red\"},eventHasTime:{color:\"green\"},flyerManageTitle:{fontSize:\"3rem\"}}));const AdminFlyerList=props=>{const classes=useStyles();const{flyers}=props;const authService=AuthService.getInstance();async function apiFunc(toInput){const response=await fetch(\"/api/flyer/deleteFlyer\",{method:\"POST\",headers:new Headers({\"Content-Type\":\"application/json\",Authorization:authService.getSecureToken()}),mode:\"cors\",cache:\"no-cache\",credentials:\"same-origin\",redirect:\"follow\",referrerPolicy:\"no-referrer\",body:JSON.stringify(toInput)});let body=await response;console.log(body);window.location.reload();}const handleDelete=id=>{const toInput={id};apiFunc(toInput);};const dateComparer=eventDate=>{const currentDate=moment.now();var momentEventDate=moment(new Date(eventDate)).format(\"x\");const diff=momentEventDate-currentDate;const diffDuration=moment.duration(diff);return diffDuration.days();};const dateDifferenceDisplay=differenceInDays=>{if(differenceInDays<0){return/*#__PURE__*/_jsxs(\"span\",{className:classes.eventOverdue,children:[\"This event is \",Math.abs(differenceInDays),\" day(s) overdue!\"]});}else if(differenceInDays>0){return/*#__PURE__*/_jsxs(\"span\",{className:classes.eventHasTime,children:[\"This event is happening in \",differenceInDays,\" day(s)!\"]});}else{return\"This event is happening today!\";}};const setFlyerSource=id=>{return\"http://localhost:8080/api/flyer/streamFlyer/\".concat(id);};if(!flyers||flyers.length===0)return/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"No flyers uploaded\"})});return/*#__PURE__*/_jsxs(Grid,{className:classes.eventsContainer,children:[/*#__PURE__*/_jsx(\"h2\",{className:classes.flyerManageTitle,children:\"Manage upcoming events\"}),/*#__PURE__*/_jsx(LazyLoad,{children:flyers.map(flyer=>{return/*#__PURE__*/_jsxs(Container,{component:\"div\",maxWidth:false,className:classes.flyerBox,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.imageBox,children:/*#__PURE__*/_jsx(\"img\",{src:setFlyerSource(flyer.id),alt:flyer.eventName,className:classes.flyerImage})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.eventDetailsBox,children:[/*#__PURE__*/_jsx(\"p\",{className:\"\".concat(classes.flyerDetails,\" \").concat(classes.flyerTitle),children:flyer.eventName}),/*#__PURE__*/_jsxs(\"p\",{className:\"\".concat(classes.flyerDetails,\" \").concat(classes.flyerSubtitles),children:[\"Event date: \",flyer.eventDate,\" |\",\" \",dateDifferenceDisplay(dateComparer(flyer.eventDate))]})]}),/*#__PURE__*/_jsx(Button,{className:classes.deleteBtn,fullWidth:true,variant:\"contained\",color:\"primary\",preventDefault:true,onClick:()=>{const confirmBox=window.confirm(\"Deleting event, please confirm.\");if(confirmBox===true){console.log(flyer.id);handleDelete(flyer.id);// window.location.reload(true);\n}},children:\"Delete event\"})]},flyer.id);})})]});};export default AdminFlyerList;","map":{"version":3,"sources":["C:/Users/Jawad/Desktop/Newbyte-ReactJS/src/Components/adminFlyerList.jsx"],"names":["Button","Container","React","Grid","makeStyles","moment","AuthService","LazyLoad","useStyles","theme","eventsContainer","overflow","maxHeight","marginBottom","flyerBox","display","flexWrap","width","height","margin","alignContent","borderBottom","flyerDetails","padding","flyerTitle","fontWeight","fontSize","flyerSubtitles","fontStyle","imageBox","alignSelf","eventDetailsBox","paddingLeft","deleteBtn","flyerImage","eventOverdue","color","eventHasTime","flyerManageTitle","AdminFlyerList","props","classes","flyers","authService","getInstance","apiFunc","toInput","response","fetch","method","headers","Headers","Authorization","getSecureToken","mode","cache","credentials","redirect","referrerPolicy","body","JSON","stringify","console","log","window","location","reload","handleDelete","id","dateComparer","eventDate","currentDate","now","momentEventDate","Date","format","diff","diffDuration","duration","days","dateDifferenceDisplay","differenceInDays","Math","abs","setFlyerSource","length","map","flyer","eventName","confirmBox","confirm"],"mappings":"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","sourcesContent":["import Button from \"@material-ui/core/Button\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport React from \"react\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport moment from \"moment\";\r\nimport AuthService from \"../services/auth-service\";\r\nimport LazyLoad from \"react-lazyload\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  eventsContainer: {\r\n    // scrollBehavior: \"smooth\",\r\n    overflow: \"auto\",\r\n    maxHeight: \"20em\",\r\n    marginBottom: \"3rem\",\r\n  },\r\n  flyerBox: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    width: \"100%\",\r\n    height: \"13em\",\r\n    margin: \"0 0 2rem 0\",\r\n    alignContent: \"flex-start\",\r\n    borderBottom: \"1px darkgrey solid\",\r\n  },\r\n  flyerDetails: {\r\n    width: \"100%\",\r\n    margin: 0,\r\n    padding: 0,\r\n  },\r\n  flyerTitle: {\r\n    fontWeight: \"bold\",\r\n    fontSize: \"2em\",\r\n  },\r\n  flyerSubtitles: {\r\n    fontStyle: \"italic\",\r\n    fontSize: \"1.2em\",\r\n  },\r\n  imageBox: {\r\n    alignSelf: \"flex-start\",\r\n    width: \"10%\",\r\n  },\r\n  eventDetailsBox: {\r\n    width: \"70%\",\r\n    paddingLeft: \"1rem\",\r\n  },\r\n  deleteBtn: {\r\n    width: \"20%\",\r\n    fontSize: \"1.5rem\",\r\n  },\r\n  flyerImage: {\r\n    alignSelf: \"flex-end\",\r\n    width: \"100%\",\r\n  },\r\n  eventOverdue: {\r\n    color: \"red\",\r\n  },\r\n  eventHasTime: {\r\n    color: \"green\",\r\n  },\r\n  flyerManageTitle: {\r\n    fontSize: \"3rem\",\r\n  },\r\n}));\r\n\r\nconst AdminFlyerList = (props) => {\r\n  const classes = useStyles();\r\n  const { flyers } = props;\r\n\r\n  const authService = AuthService.getInstance();\r\n\r\n  async function apiFunc(toInput) {\r\n    const response = await fetch(\"/api/flyer/deleteFlyer\", {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: authService.getSecureToken(),\r\n      }),\r\n      mode: \"cors\",\r\n      cache: \"no-cache\",\r\n      credentials: \"same-origin\",\r\n      redirect: \"follow\",\r\n      referrerPolicy: \"no-referrer\",\r\n      body: JSON.stringify(toInput),\r\n    });\r\n    let body = await response;\r\n    console.log(body);\r\n    window.location.reload();\r\n  }\r\n\r\n  const handleDelete = (id) => {\r\n    const toInput = { id };\r\n    apiFunc(toInput);\r\n  };\r\n\r\n  const dateComparer = (eventDate) => {\r\n    const currentDate = moment.now();\r\n    var momentEventDate = moment(new Date(eventDate)).format(\"x\");\r\n    const diff = momentEventDate - currentDate;\r\n    const diffDuration = moment.duration(diff);\r\n    return diffDuration.days();\r\n  };\r\n\r\n  const dateDifferenceDisplay = (differenceInDays) => {\r\n    if (differenceInDays < 0) {\r\n      return (\r\n        <span className={classes.eventOverdue}>\r\n          This event is {Math.abs(differenceInDays)} day(s) overdue!\r\n        </span>\r\n      );\r\n    } else if (differenceInDays > 0) {\r\n      return (\r\n        <span className={classes.eventHasTime}>\r\n          This event is happening in {differenceInDays} day(s)!\r\n        </span>\r\n      );\r\n    } else {\r\n      return `This event is happening today!`;\r\n    }\r\n  };\r\n\r\n  const setFlyerSource = (id) => {\r\n    return `http://localhost:8080/api/flyer/streamFlyer/${id}`;\r\n  };\r\n\r\n  if (!flyers || flyers.length === 0)\r\n    return (\r\n      <p>\r\n        <b>No flyers uploaded</b>\r\n      </p>\r\n    );\r\n  return (\r\n    <Grid className={classes.eventsContainer}>\r\n      <h2 className={classes.flyerManageTitle}>Manage upcoming events</h2>\r\n      <LazyLoad>\r\n        {flyers.map((flyer) => {\r\n          return (\r\n            <Container\r\n              component=\"div\"\r\n              maxWidth={false}\r\n              className={classes.flyerBox}\r\n              key={flyer.id}\r\n            >\r\n              <div className={classes.imageBox}>\r\n                <img\r\n                  src={setFlyerSource(flyer.id)}\r\n                  alt={flyer.eventName}\r\n                  className={classes.flyerImage}\r\n                />\r\n              </div>\r\n              <div className={classes.eventDetailsBox}>\r\n                <p className={`${classes.flyerDetails} ${classes.flyerTitle}`}>\r\n                  {flyer.eventName}\r\n                </p>\r\n                <p\r\n                  className={`${classes.flyerDetails} ${classes.flyerSubtitles}`}\r\n                >\r\n                  Event date: {flyer.eventDate} |{\" \"}\r\n                  {dateDifferenceDisplay(dateComparer(flyer.eventDate))}\r\n                </p>\r\n              </div>\r\n              <Button\r\n                className={classes.deleteBtn}\r\n                fullWidth\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                preventDefault\r\n                onClick={() => {\r\n                  const confirmBox = window.confirm(\r\n                    \"Deleting event, please confirm.\"\r\n                  );\r\n                  if (confirmBox === true) {\r\n                    console.log(flyer.id);\r\n                    handleDelete(flyer.id);\r\n                    // window.location.reload(true);\r\n                  }\r\n                }}\r\n              >\r\n                Delete event\r\n              </Button>\r\n            </Container>\r\n          );\r\n        })}\r\n      </LazyLoad>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default AdminFlyerList;\r\n"]},"metadata":{},"sourceType":"module"}