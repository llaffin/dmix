{"ast":null,"code":"import Avatar from\"@material-ui/core/Avatar\";import Box from\"@material-ui/core/Box\";import Button from\"@material-ui/core/Button\";import Container from\"@material-ui/core/Container\";import CssBaseline from\"@material-ui/core/CssBaseline\";import Grid from\"@material-ui/core/Grid\";import{makeStyles}from\"@material-ui/core/styles\";import TextField from\"@material-ui/core/TextField\";import Typography from\"@material-ui/core/Typography\";import GroupIcon from\"@material-ui/icons/Group\";import React from\"react\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({paper:{marginTop:theme.spacing(7),display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},avatar:{margin:theme.spacing(1),backgroundColor:theme.palette.secondary.main},form:{width:\"100%\",// Fix IE 11 issue.\nmarginTop:theme.spacing(3)},submit:{margin:theme.spacing(3,0,2)},textField:{marginLeft:theme.spacing(1),marginRight:theme.spacing(1),width:\"100%\"}}));export default function ResetPassword(){const classes=useStyles();const[firstLoad,setLoad]=React.useState(true);const[password,setPassword]=React.useState(\"\");const[confirmPassword,setConfirmPassword]=React.useState(\"\");const[passwordResetCode,setToken]=React.useState(\"\");const handlePasswordChange=event=>setPassword(event.target.value);const handleConfirmPasswordChange=event=>setConfirmPassword(event.target.value);const[message,setMessage]=React.useState(\"\");// console.log(window.location.href);\n// console.log(window.location.pathname);\n// console.log(window.location.search);\nvar pathArray=window.location.search.split(\"=\");var tokenURL=pathArray[1];console.log(\"Token from URL:\",tokenURL);async function apiFunc(toInput){const response=await fetch(\"/api/auth/reset\",{method:\"POST\",mode:\"cors\",cache:\"no-cache\",credentials:\"same-origin\",headers:{\"Content-Type\":\"application/json\"},redirect:\"follow\",referrerPolicy:\"no-referrer\",body:JSON.stringify(toInput)});let body=await response;console.log(body);setMessage(body.ok?\"Password Reset successful\":\"Password Reset failed\");}const handleSubmit=variables=>{if(password==confirmPassword){alert(\"Passwords match!\");const toInput={password:password,passwordResetCode:tokenURL};apiFunc(toInput);setPassword(\"\");setConfirmPassword(\"\");setToken(tokenURL);console.log(tokenURL);}else{alert(\"Not matching!\");}};if(firstLoad){// sampleFunc();\nsetLoad(false);}function Copyright(){return/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",align:\"center\",children:[\"newByteX © \",\" \",new Date().getFullYear()]});}return/*#__PURE__*/_jsxs(Container,{component:\"main\",maxWidth:\"xs\",children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsxs(\"div\",{className:classes.paper,children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Avatar,{className:classes.avatar,children:/*#__PURE__*/_jsx(GroupIcon,{})}),/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Reset Password\"}),/*#__PURE__*/_jsxs(\"form\",{className:classes.form,noValidate:true,children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",required:true,fullWidth:true,id:\"password\",value:password,label:\"New Password\",type:\"password\",name:\"password\",autoComplete:\"password\",onChange:handlePasswordChange})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",required:true,fullWidth:true,id:\"confirmPassword\",value:confirmPassword,label:\"Confirm Password\",type:\"password\",name:\"confirmPassword\",autoComplete:\"confirmPassword\",onChange:handleConfirmPasswordChange})})]}),/*#__PURE__*/_jsx(Button// type=\"submit\"\n,{fullWidth:true,variant:\"contained\",color:\"primary\",preventefault:true,className:classes.submit,onClick:handleSubmit,children:\"Reset Password\"})]}),/*#__PURE__*/_jsxs(Typography,{style:{margin:7},variant:\"body1\",children:[\"Status: \",message]})]}),/*#__PURE__*/_jsx(Box,{mt:8,children:/*#__PURE__*/_jsx(Copyright,{})})]});}","map":{"version":3,"sources":["C:/Users/Jawad/Desktop/Newbyte-ReactJS/src/Components/Authentication/reset.jsx"],"names":["Avatar","Box","Button","Container","CssBaseline","Grid","makeStyles","TextField","Typography","GroupIcon","React","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","textField","marginLeft","marginRight","ResetPassword","classes","firstLoad","setLoad","useState","password","setPassword","confirmPassword","setConfirmPassword","passwordResetCode","setToken","handlePasswordChange","event","target","value","handleConfirmPasswordChange","message","setMessage","pathArray","window","location","search","split","tokenURL","console","log","apiFunc","toInput","response","fetch","method","mode","cache","credentials","headers","redirect","referrerPolicy","body","JSON","stringify","ok","handleSubmit","variables","alert","Copyright","Date","getFullYear"],"mappings":"AAAA,MAAOA,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,GAAP,KAAgB,uBAAhB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,WAAP,KAAwB,+BAAxB,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,0BAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,KAAMC,CAAAA,SAAS,CAAGL,UAAU,CAAEM,KAAD,GAAY,CACvCC,KAAK,CAAE,CACLC,SAAS,CAAEF,KAAK,CAACG,OAAN,CAAc,CAAd,CADN,CAELC,OAAO,CAAE,MAFJ,CAGLC,aAAa,CAAE,QAHV,CAILC,UAAU,CAAE,QAJP,CADgC,CAOvCC,MAAM,CAAE,CACNC,MAAM,CAAER,KAAK,CAACG,OAAN,CAAc,CAAd,CADF,CAENM,eAAe,CAAET,KAAK,CAACU,OAAN,CAAcC,SAAd,CAAwBC,IAFnC,CAP+B,CAWvCC,IAAI,CAAE,CACJC,KAAK,CAAE,MADH,CACW;AACfZ,SAAS,CAAEF,KAAK,CAACG,OAAN,CAAc,CAAd,CAFP,CAXiC,CAevCY,MAAM,CAAE,CACNP,MAAM,CAAER,KAAK,CAACG,OAAN,CAAc,CAAd,CAAiB,CAAjB,CAAoB,CAApB,CADF,CAf+B,CAkBvCa,SAAS,CAAE,CACTC,UAAU,CAAEjB,KAAK,CAACG,OAAN,CAAc,CAAd,CADH,CAETe,WAAW,CAAElB,KAAK,CAACG,OAAN,CAAc,CAAd,CAFJ,CAGTW,KAAK,CAAE,MAHE,CAlB4B,CAAZ,CAAD,CAA5B,CAyBA,cAAe,SAASK,CAAAA,aAAT,EAAyB,CACtC,KAAMC,CAAAA,OAAO,CAAGrB,SAAS,EAAzB,CACA,KAAM,CAACsB,SAAD,CAAYC,OAAZ,EAAuBxB,KAAK,CAACyB,QAAN,CAAe,IAAf,CAA7B,CAEA,KAAM,CAACC,QAAD,CAAWC,WAAX,EAA0B3B,KAAK,CAACyB,QAAN,CAAe,EAAf,CAAhC,CACA,KAAM,CAACG,eAAD,CAAkBC,kBAAlB,EAAwC7B,KAAK,CAACyB,QAAN,CAAe,EAAf,CAA9C,CACA,KAAM,CAACK,iBAAD,CAAoBC,QAApB,EAAgC/B,KAAK,CAACyB,QAAN,CAAe,EAAf,CAAtC,CAEA,KAAMO,CAAAA,oBAAoB,CAAIC,KAAD,EAAWN,WAAW,CAACM,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAnD,CACA,KAAMC,CAAAA,2BAA2B,CAAIH,KAAD,EAClCJ,kBAAkB,CAACI,KAAK,CAACC,MAAN,CAAaC,KAAd,CADpB,CAGA,KAAM,CAACE,OAAD,CAAUC,UAAV,EAAwBtC,KAAK,CAACyB,QAAN,CAAe,EAAf,CAA9B,CAEA;AACA;AACA;AACA,GAAIc,CAAAA,SAAS,CAAGC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuBC,KAAvB,CAA6B,GAA7B,CAAhB,CACA,GAAIC,CAAAA,QAAQ,CAAGL,SAAS,CAAC,CAAD,CAAxB,CACAM,OAAO,CAACC,GAAR,CAAY,iBAAZ,CAA+BF,QAA/B,EAEA,cAAeG,CAAAA,OAAf,CAAuBC,OAAvB,CAAgC,CAC9B,KAAMC,CAAAA,QAAQ,CAAG,KAAMC,CAAAA,KAAK,CAAC,iBAAD,CAAoB,CAC9CC,MAAM,CAAE,MADsC,CAE9CC,IAAI,CAAE,MAFwC,CAG9CC,KAAK,CAAE,UAHuC,CAI9CC,WAAW,CAAE,aAJiC,CAK9CC,OAAO,CAAE,CACP,eAAgB,kBADT,CALqC,CAQ9CC,QAAQ,CAAE,QARoC,CAS9CC,cAAc,CAAE,aAT8B,CAU9CC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeZ,OAAf,CAVwC,CAApB,CAA5B,CAaA,GAAIU,CAAAA,IAAI,CAAG,KAAMT,CAAAA,QAAjB,CACAJ,OAAO,CAACC,GAAR,CAAYY,IAAZ,EACApB,UAAU,CAACoB,IAAI,CAACG,EAAL,CAAU,2BAAV,CAAwC,uBAAzC,CAAV,CACD,CAED,KAAMC,CAAAA,YAAY,CAAIC,SAAD,EAAe,CAClC,GAAIrC,QAAQ,EAAIE,eAAhB,CAAiC,CAC/BoC,KAAK,CAAC,kBAAD,CAAL,CACA,KAAMhB,CAAAA,OAAO,CAAG,CAAEtB,QAAQ,CAAEA,QAAZ,CAAsBI,iBAAiB,CAAEc,QAAzC,CAAhB,CACAG,OAAO,CAACC,OAAD,CAAP,CACArB,WAAW,CAAC,EAAD,CAAX,CACAE,kBAAkB,CAAC,EAAD,CAAlB,CACAE,QAAQ,CAACa,QAAD,CAAR,CACAC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EACD,CARD,IAQO,CACLoB,KAAK,CAAC,eAAD,CAAL,CACD,CACF,CAZD,CAcA,GAAIzC,SAAJ,CAAe,CACb;AACAC,OAAO,CAAC,KAAD,CAAP,CACD,CAED,QAASyC,CAAAA,SAAT,EAAqB,CACnB,mBACE,MAAC,UAAD,EAAY,OAAO,CAAC,OAApB,CAA4B,KAAK,CAAC,eAAlC,CAAkD,KAAK,CAAC,QAAxD,WACG,aADH,KACmB,GAAIC,CAAAA,IAAJ,GAAWC,WAAX,EADnB,GADF,CAKD,CAED,mBACE,MAAC,SAAD,EAAW,SAAS,CAAC,MAArB,CAA4B,QAAQ,CAAC,IAArC,wBACE,KAAC,WAAD,IADF,cAEE,aAAK,SAAS,CAAE7C,OAAO,CAACnB,KAAxB,wBACE,aADF,cAEE,aAFF,cAGE,aAHF,cAIE,KAAC,MAAD,EAAQ,SAAS,CAAEmB,OAAO,CAACb,MAA3B,uBACE,KAAC,SAAD,IADF,EAJF,cAOE,KAAC,UAAD,EAAY,SAAS,CAAC,IAAtB,CAA2B,OAAO,CAAC,IAAnC,4BAPF,cAUE,cAAM,SAAS,CAAEa,OAAO,CAACP,IAAzB,CAA+B,UAAU,KAAzC,wBACE,MAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,wBACE,KAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,uBACE,KAAC,SAAD,EACE,OAAO,CAAC,UADV,CAEE,QAAQ,KAFV,CAGE,SAAS,KAHX,CAIE,EAAE,CAAC,UAJL,CAKE,KAAK,CAAEW,QALT,CAME,KAAK,CAAC,cANR,CAOE,IAAI,CAAC,UAPP,CAQE,IAAI,CAAC,UARP,CASE,YAAY,CAAC,UATf,CAUE,QAAQ,CAAEM,oBAVZ,EADF,EADF,cAgBE,KAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,uBACE,KAAC,SAAD,EACE,OAAO,CAAC,UADV,CAEE,QAAQ,KAFV,CAGE,SAAS,KAHX,CAIE,EAAE,CAAC,iBAJL,CAKE,KAAK,CAAEJ,eALT,CAME,KAAK,CAAC,kBANR,CAOE,IAAI,CAAC,UAPP,CAQE,IAAI,CAAC,iBARP,CASE,YAAY,CAAC,iBATf,CAUE,QAAQ,CAAEQ,2BAVZ,EADF,EAhBF,GADF,cAgCE,KAAC,MACC;AADF,EAEE,SAAS,KAFX,CAGE,OAAO,CAAC,WAHV,CAIE,KAAK,CAAC,SAJR,CAKE,aAAa,KALf,CAME,SAAS,CAAEd,OAAO,CAACL,MANrB,CAOE,OAAO,CAAE6C,YAPX,4BAhCF,GAVF,cAsDE,MAAC,UAAD,EAAY,KAAK,CAAE,CAAEpD,MAAM,CAAE,CAAV,CAAnB,CAAkC,OAAO,CAAC,OAA1C,sBACW2B,OADX,GAtDF,GAFF,cA4DE,KAAC,GAAD,EAAK,EAAE,CAAE,CAAT,uBACE,KAAC,SAAD,IADF,EA5DF,GADF,CAkED","sourcesContent":["import Avatar from \"@material-ui/core/Avatar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport GroupIcon from \"@material-ui/icons/Group\";\r\nimport React from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(7),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n    width: \"100%\",\r\n  },\r\n}));\r\n\r\nexport default function ResetPassword() {\r\n  const classes = useStyles();\r\n  const [firstLoad, setLoad] = React.useState(true);\r\n\r\n  const [password, setPassword] = React.useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = React.useState(\"\");\r\n  const [passwordResetCode, setToken] = React.useState(\"\");\r\n\r\n  const handlePasswordChange = (event) => setPassword(event.target.value);\r\n  const handleConfirmPasswordChange = (event) =>\r\n    setConfirmPassword(event.target.value);\r\n\r\n  const [message, setMessage] = React.useState(\"\");\r\n\r\n  // console.log(window.location.href);\r\n  // console.log(window.location.pathname);\r\n  // console.log(window.location.search);\r\n  var pathArray = window.location.search.split(\"=\");\r\n  var tokenURL = pathArray[1];\r\n  console.log(\"Token from URL:\", tokenURL);\r\n\r\n  async function apiFunc(toInput) {\r\n    const response = await fetch(\"/api/auth/reset\", {\r\n      method: \"POST\",\r\n      mode: \"cors\",\r\n      cache: \"no-cache\",\r\n      credentials: \"same-origin\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      redirect: \"follow\",\r\n      referrerPolicy: \"no-referrer\",\r\n      body: JSON.stringify(toInput),\r\n    });\r\n\r\n    let body = await response;\r\n    console.log(body);\r\n    setMessage(body.ok ? \"Password Reset successful\" : \"Password Reset failed\");\r\n  }\r\n\r\n  const handleSubmit = (variables) => {\r\n    if (password == confirmPassword) {\r\n      alert(\"Passwords match!\");\r\n      const toInput = { password: password, passwordResetCode: tokenURL };\r\n      apiFunc(toInput);\r\n      setPassword(\"\");\r\n      setConfirmPassword(\"\");\r\n      setToken(tokenURL);\r\n      console.log(tokenURL);\r\n    } else {\r\n      alert(\"Not matching!\");\r\n    }\r\n  };\r\n\r\n  if (firstLoad) {\r\n    // sampleFunc();\r\n    setLoad(false);\r\n  }\r\n\r\n  function Copyright() {\r\n    return (\r\n      <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n        {\"newByteX © \"} {new Date().getFullYear()}\r\n      </Typography>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <br></br>\r\n        <br></br>\r\n        <br></br>\r\n        <Avatar className={classes.avatar}>\r\n          <GroupIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Reset Password\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"password\"\r\n                value={password}\r\n                label=\"New Password\"\r\n                type=\"password\"\r\n                name=\"password\"\r\n                autoComplete=\"password\"\r\n                onChange={handlePasswordChange}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"confirmPassword\"\r\n                value={confirmPassword}\r\n                label=\"Confirm Password\"\r\n                type=\"password\"\r\n                name=\"confirmPassword\"\r\n                autoComplete=\"confirmPassword\"\r\n                onChange={handleConfirmPasswordChange}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <Button\r\n            // type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            preventefault\r\n            className={classes.submit}\r\n            onClick={handleSubmit}\r\n          >\r\n            Reset Password\r\n          </Button>\r\n        </form>\r\n        <Typography style={{ margin: 7 }} variant=\"body1\">\r\n          Status: {message}\r\n        </Typography>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}