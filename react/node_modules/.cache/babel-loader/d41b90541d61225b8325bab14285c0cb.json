{"ast":null,"code":"import Button from\"@material-ui/core/Button\";import Container from\"@material-ui/core/Container\";import{ArrowRightSharp}from\"@mui/icons-material\";import React from\"react\";import{useRef}from\"react\";import AuthService from\"../services/auth-service\";import{Grid}from\"@material-ui/core\";import{makeStyles}from\"@material-ui/core/styles\";import moment from\"moment\";import TrackImage from\"../Assests/Images/TrackImage.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({eventsContainer:{// scrollBehavior: \"smooth\",\noverflow:\"auto\",maxHeight:\"20em\",marginBottom:\"3rem\"},flyerBox:{display:\"flex\",flexWrap:\"wrap\",width:\"100%\",height:\"13em\",margin:\"0 0 2rem 0\",alignContent:\"flex-start\",borderBottom:\"1px darkgrey solid\"},flyerDetails:{width:\"100%\",margin:0,padding:0},flyerTitle:{fontWeight:\"bold\",fontSize:\"2em\"},flyerSubtitles:{fontStyle:\"italic\",fontSize:\"1.2em\"},imageBox:{alignSelf:\"flex-start\",width:\"10%\"},eventDetailsBox:{width:\"70%\",paddingLeft:\"1rem\"},deleteBtn:{width:\"20%\",fontSize:\"1.5rem\"},flyerImage:{alignSelf:\"flex-end\",width:\"100%\"},eventOverdue:{color:\"red\"},eventHasTime:{color:\"green\"},flyerManageTitle:{fontSize:\"3rem\"},trackTitle:{fontSize:\"1em\"}}));const AdminTrackList=props=>{const classes=useStyles();const{tracks}=props;const audioUrl=useRef();const[id,setTrackId]=React.useState(\"\");//const [acquiredId, setAcquiredId] = React.useState(\"\");\nconst authService=AuthService.getInstance();async function apiFunc(toInput){const response=await fetch(\"/api/track/deleteTrack\",{method:\"POST\",headers:new Headers({\"Content-Type\":\"application/json\",Authorization:authService.getSecureToken()}),mode:\"cors\",cache:\"no-cache\",credentials:\"same-origin\",redirect:\"follow\",referrerPolicy:\"no-referrer\",body:JSON.stringify(toInput)});let body=await response;console.log(body);window.location.reload();}const handleDelete=id=>{const toInput={id};apiFunc(toInput);};const setTrackSource=id=>{return\"http://localhost:8080/api/track/streamTrack/\".concat(id);};if(!tracks||tracks.length===0)return/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"No tracks uploaded\"})});return/*#__PURE__*/_jsxs(Grid,{className:classes.eventsContainer,children:[/*#__PURE__*/_jsx(\"h2\",{className:classes.flyerManageTitle,children:\"Manage tracks\"}),tracks.map(track=>{return/*#__PURE__*/_jsxs(Container,{component:\"div\",maxWidth:false,className:classes.flyerBox,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.imageBox,children:/*#__PURE__*/_jsx(\"img\",{src:TrackImage,className:classes.flyerImage})}),/*#__PURE__*/_jsx(\"div\",{className:classes.eventDetailsBox,children:/*#__PURE__*/_jsxs(\"p\",{className:\"\".concat(classes.flyerDetails,\" \").concat(classes.flyerTitle),children:[/*#__PURE__*/_jsx(\"span\",{className:classes.trackTitle,children:track.title}),\" -\",\" \",track.artist,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"audio\",{type:\"audio/mpeg\",controls:true,volume:\"true\",children:[/*#__PURE__*/_jsx(\"source\",{src:setTrackSource(track.id),type:\"audio/mpeg\"}),\"Your browser does not support the audio element.\"]})]})},track.id),/*#__PURE__*/_jsx(Button,{className:classes.deleteBtn,fullWidth:true,variant:\"contained\",color:\"primary\",preventDefault:true,onClick:()=>{const confirmBox=window.confirm(\"Deleting track, please confirm.\");if(confirmBox===true){console.log(track.id);handleDelete(track.id);// window.location.reload(true);\n}},children:\"Delete track\"})]},track.id);})]});};export default AdminTrackList;","map":{"version":3,"sources":["C:/Users/Jawad/Desktop/Newbyte-ReactJS/src/Components/adminTrackList.jsx"],"names":["Button","Container","ArrowRightSharp","React","useRef","AuthService","Grid","makeStyles","moment","TrackImage","useStyles","theme","eventsContainer","overflow","maxHeight","marginBottom","flyerBox","display","flexWrap","width","height","margin","alignContent","borderBottom","flyerDetails","padding","flyerTitle","fontWeight","fontSize","flyerSubtitles","fontStyle","imageBox","alignSelf","eventDetailsBox","paddingLeft","deleteBtn","flyerImage","eventOverdue","color","eventHasTime","flyerManageTitle","trackTitle","AdminTrackList","props","classes","tracks","audioUrl","id","setTrackId","useState","authService","getInstance","apiFunc","toInput","response","fetch","method","headers","Headers","Authorization","getSecureToken","mode","cache","credentials","redirect","referrerPolicy","body","JSON","stringify","console","log","window","location","reload","handleDelete","setTrackSource","length","map","track","title","artist","confirmBox","confirm"],"mappings":"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","sourcesContent":["import Button from \"@material-ui/core/Button\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport { ArrowRightSharp } from \"@mui/icons-material\";\r\nimport React from \"react\";\r\nimport { useRef } from \"react\";\r\nimport AuthService from \"../services/auth-service\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport moment from \"moment\";\r\nimport TrackImage from \"../Assests/Images/TrackImage.png\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  eventsContainer: {\r\n    // scrollBehavior: \"smooth\",\r\n    overflow: \"auto\",\r\n    maxHeight: \"20em\",\r\n    marginBottom: \"3rem\",\r\n  },\r\n  flyerBox: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    width: \"100%\",\r\n    height: \"13em\",\r\n    margin: \"0 0 2rem 0\",\r\n    alignContent: \"flex-start\",\r\n    borderBottom: \"1px darkgrey solid\",\r\n  },\r\n  flyerDetails: {\r\n    width: \"100%\",\r\n    margin: 0,\r\n    padding: 0,\r\n  },\r\n  flyerTitle: {\r\n    fontWeight: \"bold\",\r\n    fontSize: \"2em\",\r\n  },\r\n  flyerSubtitles: {\r\n    fontStyle: \"italic\",\r\n    fontSize: \"1.2em\",\r\n  },\r\n  imageBox: {\r\n    alignSelf: \"flex-start\",\r\n    width: \"10%\",\r\n  },\r\n  eventDetailsBox: {\r\n    width: \"70%\",\r\n    paddingLeft: \"1rem\",\r\n  },\r\n  deleteBtn: {\r\n    width: \"20%\",\r\n    fontSize: \"1.5rem\",\r\n  },\r\n  flyerImage: {\r\n    alignSelf: \"flex-end\",\r\n    width: \"100%\",\r\n  },\r\n  eventOverdue: {\r\n    color: \"red\",\r\n  },\r\n  eventHasTime: {\r\n    color: \"green\",\r\n  },\r\n  flyerManageTitle: {\r\n    fontSize: \"3rem\",\r\n  },\r\n  trackTitle: {\r\n    fontSize: \"1em\",\r\n  },\r\n}));\r\n\r\nconst AdminTrackList = (props) => {\r\n  const classes = useStyles();\r\n  const { tracks } = props;\r\n  const audioUrl = useRef();\r\n  const [id, setTrackId] = React.useState(\"\");\r\n  //const [acquiredId, setAcquiredId] = React.useState(\"\");\r\n\r\n  const authService = AuthService.getInstance();\r\n\r\n  async function apiFunc(toInput) {\r\n    const response = await fetch(\"/api/track/deleteTrack\", {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: authService.getSecureToken(),\r\n      }),\r\n      mode: \"cors\",\r\n      cache: \"no-cache\",\r\n      credentials: \"same-origin\",\r\n      redirect: \"follow\",\r\n      referrerPolicy: \"no-referrer\",\r\n      body: JSON.stringify(toInput),\r\n    });\r\n    let body = await response;\r\n    console.log(body);\r\n    window.location.reload();\r\n  }\r\n\r\n  const handleDelete = (id) => {\r\n    const toInput = { id };\r\n    apiFunc(toInput);\r\n  };\r\n\r\n  const setTrackSource = (id) => {\r\n    return `http://localhost:8080/api/track/streamTrack/${id}`;\r\n  };\r\n\r\n  if (!tracks || tracks.length === 0)\r\n    return (\r\n      <p>\r\n        <b>No tracks uploaded</b>\r\n      </p>\r\n    );\r\n  return (\r\n    <Grid className={classes.eventsContainer}>\r\n      <h2 className={classes.flyerManageTitle}>Manage tracks</h2>\r\n      {tracks.map((track) => {\r\n        return (\r\n          <Container\r\n            component=\"div\"\r\n            maxWidth={false}\r\n            className={classes.flyerBox}\r\n            key={track.id}\r\n          >\r\n            <div className={classes.imageBox}>\r\n              <img src={TrackImage} className={classes.flyerImage} />\r\n            </div>\r\n            <div key={track.id} className={classes.eventDetailsBox}>\r\n              <p className={`${classes.flyerDetails} ${classes.flyerTitle}`}>\r\n                {/* <span>Track ID: {track.id}</span>\r\n                <br></br> */}\r\n                <span className={classes.trackTitle}>{track.title}</span> -{\" \"}\r\n                {track.artist}\r\n                <br></br>\r\n                <audio type=\"audio/mpeg\" controls volume=\"true\">\r\n                  <source\r\n                    src={setTrackSource(track.id)}\r\n                    type=\"audio/mpeg\"\r\n                  ></source>\r\n                  Your browser does not support the audio element.\r\n                </audio>\r\n              </p>\r\n            </div>\r\n            <Button\r\n              className={classes.deleteBtn}\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              preventDefault\r\n              onClick={() => {\r\n                const confirmBox = window.confirm(\r\n                  \"Deleting track, please confirm.\"\r\n                );\r\n                if (confirmBox === true) {\r\n                  console.log(track.id);\r\n                  handleDelete(track.id);\r\n                  // window.location.reload(true);\r\n                }\r\n              }}\r\n            >\r\n              Delete track\r\n            </Button>\r\n          </Container>\r\n        );\r\n      })}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default AdminTrackList;\r\n"]},"metadata":{},"sourceType":"module"}